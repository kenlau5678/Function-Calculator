<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src='js/echarts.min.js'></script>

    <style>
        .function {
            display: block;
            height: 500px;
            width: 500px;
            float: left;
        }
        
        .button {
            display: block;
            height: 448px;
            width: 448px;
            padding-left: 50px;
            padding-top: 50px;
            background-color: white;
            border: 1px solid blue;
            float: left;
        }
        
        button {
            height: 50px;
            width: 100px;
            /*             border: 1px solid blue; */
        }
        
        .plot {
            position: absolute;
            left: 300px;
            top: 350px;
        }
        
        .input {
            display: none;
        }
    </style>
</head>

<body>
    <div>
        <div class="button">
            <button class="linear">一次函數</button>
            <button class="quadratic">二次函數</button>

            <div class="input" , id="linear">
                <br>
                <div>
                    k: <input type="text" id="linear_k">
                </div>
                <br>
                <div>
                    b: <input type="text" id="linear_b">
                </div>
            </div>

            <div class="input" , id="quadratic">
                <br>
                <div>
                    a: <input type="text" id="quadratic_a">
                </div>
                <br>
                <div>
                    b: <input type="text" id="quadratic_b">
                </div>
                <br>
                <div>
                    c: <input type="text" id="quadratic_c">
                </div>
            </div>

        </div>

        <button class="plot">繪製</button>
    </div>

    <div class="function"></div>
    </div>


    <script>
        var f = 1;
        var lineartext = document.querySelector('#linear')
        var quadratictext = document.querySelector('#quadratic')
        var plot = document.querySelector('.plot')


        var linear = document.querySelector('.linear')
        linear.addEventListener('click', function() {
            f = 1;
            var input = document.querySelectorAll('.input')
            for (var i = 0; i < input.length; i++) {
                input[i].style.display = 'none'
            }
            lineartext.style.display = 'block'

        })
        var quadratic = document.querySelector('.quadratic')
        quadratic.addEventListener('click', function() {
            f = 2;

            var input = document.querySelectorAll('.input')

            for (var i = 0; i < input.length; i++) {
                input[i].style.display = 'none'
            }
            quadratictext.style.display = 'block'


        })



        plot.addEventListener('click', function() {
            if (f == 1) {
                var k = document.querySelector('#linear_k').value
                var b = document.querySelector('#linear_b').value


                option.series[0]['data'] = linearData(k, b)

            } else if (f == 2) {

                var a = document.querySelector('#quadratic_a').value
                var b = document.querySelector('#quadratic_b').value
                var c = document.querySelector('#quadratic_c').value
                option.series[0]['data'] = quadraticData(a, b, c)
            }
            functionCharts.setOption(option);


        })



        var functionCharts = echarts.init(document.querySelector('.function'), 'dark');

        var data = quadraticData()

        /*         function func(x) {
                    x /= 10;
                    return Math.sin(x) * Math.cos(x * 2 + 1) * Math.sin(x * 3 + 2) * 50;
                }

                function generateData() {
                    let data = [];
                    for (let i = -200; i <= 200; i += 0.1) {
                        data.push([i, func(i)]);
                    }
                    return data;
                } */



        //一次函數
        function linearFunction(x, k, b) {
            return ((k * x) + parseInt(b))
        }

        function linearData(k, b) {
            let data = [];
            for (let i = -200; i <= 200; i += 0.1) {
                data.push([i, linearFunction(i, k, b)]);
            }
            return data;
        }


        //二次函數
        function quadraticFunction(x, a, b, c) {
            return a * x ** 2 + b * x + parseInt(c)
        }

        function quadraticData(a, b, c) {
            let data = [];
            for (let i = -200; i <= 200; i += 0.1) {
                data.push([i, quadraticFunction(i, a, b, c)]);
            }
            return data;
        }



        var option = {
            animation: false,
            grid: {
                top: 40,
                left: 50,
                right: 40,
                bottom: 50
            },
            xAxis: {
                name: 'x',
                minorTick: {
                    show: true
                },
                minorSplitLine: {
                    show: true
                }

            },
            yAxis: {
                name: 'y',
                min: -100,
                max: 100,
                minorTick: {
                    show: true
                },
                minorSplitLine: {
                    show: true
                }
            },
            dataZoom: [{
                show: true,
                type: 'inside',
                filterMode: 'none',
                xAxisIndex: [0],
                startValue: -20,
                endValue: 20
            }, {
                show: true,
                type: 'inside',
                filterMode: 'none',
                yAxisIndex: [0],
                startValue: -20,
                endValue: 20
            }],
            series: [{
                type: 'line',
                showSymbol: false,
                clip: true,
                data: linearData()
            }]
        };

        // 使用刚指定的配置项和数据显示图表。
        functionCharts.setOption(option);

        /* console.log(option.series[0]['data']); */

        /*         console.log(document.querySelectorAll('.input')); */
    </script>
</body>

</html>
